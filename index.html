<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <!-- Fallback for browsers that don't support SVG favicons -->
    <link rel="alternate icon" type="image/x-icon" href="/favicon.ico" />
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="/pwa-192x192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/pwa-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/pwa-512x512.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://static.cloudflareinsights.com https://js.stripe.com https://cdn.plaid.com https://www.google.com https://www.gstatic.com https://va.vercel-scripts.com https://*.vercel-scripts.com https://*.vercel-analytics.com https://*.vercel.com;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
      style-src-elem 'self' 'unsafe-inline' https://fonts.googleapis.com;
      img-src 'self' data: blob: https://*.supabase.co https://raw.githubusercontent.com https://*.cloudflare.com https://images.unsplash.com https://www.gstatic.com;
      font-src 'self' https://fonts.gstatic.com;
      connect-src 'self' 
        https://*.supabase.co
        wss://*.supabase.co
        https://api.supabase.com
        https://fonts.googleapis.com
        https://fonts.gstatic.com
        https://*.cloudflareinsights.com
        http://localhost:*
        https://localhost:*
        ws://localhost:*
        wss://localhost:*
        https://api.stripe.com
        https://*.plaid.com
        https://*.projectdcertan84workersdev.workers.dev
        https://api.ipify.org
        ws://localhost:*
        wss://localhost:*;
      frame-src 'self' https://cdn.plaid.com https://js.stripe.com https://www.google.com;
      media-src 'self';
      object-src 'none';
      base-uri 'self';" />
    
    <!-- Preconnect to Stripe domains -->
    <link rel="preconnect" href="https://js.stripe.com" crossorigin />
    <link rel="preconnect" href="https://api.stripe.com" crossorigin />
    <link rel="preconnect" href="https://m.stripe.com" crossorigin />
    <link rel="preconnect" href="https://checkout.stripe.com" crossorigin />
    
    <!-- Preconnect to Plaid domain -->
    <link rel="preconnect" href="https://cdn.plaid.com" crossorigin />
    
    <!-- Primary Meta Tags -->
    <title>Smart Debt Flow - Get Debt-Free Faster</title>
    <meta name="title" content="Smart Debt Flow - Get Debt-Free Faster">
    <meta name="description" content="Create a realistic debt payoff plan that fits your life. Track your progress, adjust for life changes, and stay motivated with clear milestones. Join thousands who've paid off debt while maintaining their lifestyle.">
    <meta name="keywords" content="debt payoff, debt freedom, financial planning, debt snowball, debt avalanche, budget planning, debt tracker">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://smartdebtflow.com/">
    <meta property="og:title" content="Smart Debt Flow - Get Debt-Free Faster">
    <meta property="og:description" content="Create a realistic debt payoff plan that fits your life. See exactly how small changes today can take years off your debt - without sacrificing your lifestyle.">
    <meta property="og:image" content="https://smartdebtflow.com/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://smartdebtflow.com/">
    <meta property="twitter:title" content="Smart Debt Flow - Get Debt-Free Faster">
    <meta property="twitter:description" content="Create a realistic debt payoff plan that fits your life. See exactly how small changes today can take years off your debt - without sacrificing your lifestyle.">
    <meta property="twitter:image" content="https://smartdebtflow.com/og-image.jpg">

    <!-- Preconnect to External Domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://gnwdahoiauduyncppbdb.supabase.co" crossorigin />
    
    <!-- Load Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500;600&display=swap">
    
    <!-- Progressive Web App -->
    <link rel="manifest" href="/manifest.json" type="application/manifest+json" crossorigin="use-credentials" />
    <link rel="manifest" href="/manifest.webmanifest" type="application/manifest+json" crossorigin="use-credentials" />
    <meta name="theme-color" content="#0A0A0A" />
    
    <!-- Cache control -->
    <meta http-equiv="Cache-Control" content="max-age=31536000" />
    
    <!-- Critical CSS -->
    <style>
      /* Inline critical CSS here */
      body { 
        background: #1E1E1E;
        margin: 0;
        padding: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      .loading { 
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: #88B04B;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      }
      
      .initial-loader {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #0A0A0A;
        z-index: 9999;
      }
      
      .initial-loader__spinner {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(136, 176, 75, 0.1);
        border-top-color: #88B04B;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .initial-loader__text {
        margin-top: 16px;
        color: #88B04B;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        font-size: 14px;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      @media (max-width: 768px) {
        .initial-loader__spinner {
          width: 32px;
          height: 32px;
          border-width: 2px;
        }
        
        .initial-loader__text {
          font-size: 12px;
        }
      }
    </style>
    
    <!-- Loader fallback script - ensure loader gets removed even if app initialization fails -->
    <script>
      // Force remove the loader after 10 seconds as a fallback
      window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          var loader = document.getElementById('initial-loader');
          if (loader) {
            console.log('Fallback: Force removing loader after timeout');
            loader.style.display = 'none';
          }
        }, 10000);  // 10 second fallback
        
        // Also try to remove it if any click happens on the page
        document.addEventListener('click', function() {
          var loader = document.getElementById('initial-loader');
          if (loader && loader.style.display !== 'none') {
            console.log('Fallback: Removing loader on user interaction');
            loader.style.display = 'none';
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Initial loading state -->
    <div id="initial-loader" class="initial-loader">
      <div class="initial-loader__spinner"></div>
      <div class="initial-loader__text">Loading Smart Debt Flow...</div>
      <div style="margin-top: 20px; font-size: 12px;">
        <button onclick="document.getElementById('initial-loader').style.display='none';" 
                style="padding: 5px 10px; background: #88B04B; color: white; border: none; cursor: pointer; border-radius: 4px;">
          Click here if loading takes too long
        </button>
      </div>
    </div>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>